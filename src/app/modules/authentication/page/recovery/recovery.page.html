<app-nav-bar />

<ion-content>
	<div class="authentication-form">
		<ion-card>
			<ion-card-header>
				<ion-card-title> Confirm Forget Password </ion-card-title>
				<ion-card-subtitle *ngIf="username">
					We emailed you a six-digit code to <b>{{username}}</b>.
					Enter the code below and confirm your password.
				</ion-card-subtitle>
			</ion-card-header>
			<ion-card-content>
				<form [formGroup]="form" (ngSubmit)="onSubmit()">
					<ion-list lines="none">
						<ion-item class="invalid" *ngIf="isInvalidCode">
							<ion-label>
								<p>Invalid Code</p>
							</ion-label>
						</ion-item>

						<ion-item>
							<app-validation-code (code)="codeLoader($event)" />
						</ion-item>

						<ion-item
							*ngIf="form.controls.username.touched && form.controls.username.invalid"
							class="invalid"
						>
							<ion-label>
								<p
									*ngIf="form.controls.username.hasError('required')"
								>
									Required
								</p>
							</ion-label>
						</ion-item>

						<ion-item *ngIf="!username">
							<input
								placeholder="Type your email or username"
								type="text"
								autocomplete="username"
								formControlName="username"
								name="username"
							/>
						</ion-item>

						<ion-item
							*ngIf="form.controls.password.touched
						&& form.controls.password.invalid"
							class="invalid"
						>
							<ion-label>
								<p
									*ngIf="form.controls.password.hasError('required')"
								>
									Required
								</p>
								<p
									*ngIf="!form.controls.password.hasError('required')"
								>
									Should has more than 8 characters
								</p>
							</ion-label>
						</ion-item>

						<ion-item>
							<app-password-input>
								<input
									#password
									type="password"
									placeholder="New Password"
									formControlName="password"
								/>
							</app-password-input>
						</ion-item>

						<ion-item>
							<ion-button
								type="submit"
								class="login-sing-in"
								color="dark"
								expand="block"
								>Recover Password</ion-button
							>
						</ion-item>
					</ion-list>
				</form>
			</ion-card-content></ion-card
		>
	</div></ion-content
>
